# GraphOwls Architecture - aka the OSINTBuddy rewrite

This document describes the high-level architecture of the GraphOwls project. If you want to familiarize yourself with the code base, you are in the right place!

### Bird's Eye View

```
┌──────────────────────────────────┐                             
│                                  │                             
│ Plugins service (Python+FastAPI) │                             
│                                  │                             
└──▲─────┬─────────────────────────┘                             
   │     │                                                       
   │     │                                                       
┌──┴─────▼─────┐          ┌─────────────────────────────────────┐
│              ├──────────►                                     │
│ Backend (Go) │          │ PostgreSQL + Apache Age (psql ext.) │
│              ◄──────────┤                                     │
└────┬──▲──────┘          └─────────────────────────────────────┘
     │  │                                                        
     │  │                                                        
┌────▼──┴────────┐                                               
│                │                                               
│ Auth (Casdoor) │                                               
│                │                                               
└──▲────────┬────┘                                               
   │        │                                                    
   │        │                                                    
   │        │                                                    
   │        │                                                    
┌──┴────────▼──────┐                                             
│                  │                                             
│ Frontend (React) │                                             
│                  │                                             
└──────────────────┘                                             
```

On the highest level GraphOwls is a thing which accepts JSON data from a [React](https://react.dev/) application and generates entities (and nodes) and links (aka edges) from user input to produce an OpenCypher ([Apache/Age](https://age.apache.org/)) graph.

More specifically input data is accepted from user created nodes on the GraphOwls UI which calls the backend then plugins (aka entities) service to retrieve the node structure. Once the backend retrieves the node structure the nodes (and edges) are saved into a [PostgreSQL](https://www.postgresql.org/docs/release/16.0/) database through the Apache/Age extension. The node structure is responsible for the visual appearance of the node on the UI and for the available datapoints a user may add to a node.

## Backend (Go)

The core backend will be running a [Chi](https://github.com/go-chi/chi) server generated by an [OpenAPI](https://github.com/oapi-codegen/oapi-codegen) spec. Some of the core functions of this backend server will be:

- Authorizing access to an individuals investigations (graphs)
- A websocket endpoint to enable optional collaborative access to create, view, delete, and update entities in an investigation
- An entity job service to check and gather any new data for an entity through the use of [gocron](https://github.com/go-co-op/gocron), this will help us support historical entity information
- Endpoints to update the dashboard layout for an investigation which may show general or targeted metrics for things such as entity count, recent updates, RSS feeds, etc
- todo: finish me

## Database (PostgreSQL + Apache Age)

todo

## Plugins service

todo

## Authentication & Authorization

todo

## Frontend (TypeScript + React)

todo
